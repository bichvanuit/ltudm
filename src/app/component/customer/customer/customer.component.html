<div id="customer" class="mt-3">
  <div class="container">
    <div class="home-wrap">
      <div class="row" *ngIf="formInfo != null">
        <div class="col-md-2 sidebar">
          <p>Bích Vân</p>
          <ul>
            <li (click)="show(0)" [ngClass]="{'active' : active[0]}"><i class="fa fa-user" aria-hidden="true"></i>Thông
              tin tài khoản</li>
            <li (click)="show(1)" [ngClass]="{'active' : active[1]}"><i class="fa fa-sticky-note-o" aria-hidden="true"></i>Quản
              lý đơn hàng</li>
            <li (click)="show(2)" [ngClass]="{'active' : active[2]}"><i class="fa fa-eye" aria-hidden="true"></i>Sản
              phẩm bạn đã xem</li>            
            <li (click)="show(3)" [ngClass]="{'active' : active[4]}"><i class="fa fa-heart" aria-hidden="true"></i>Sản
              phẩm yêu thích</li>
            <li (click)="show(4)" [ngClass]="{'active' : active[5]}"><i class="fa fa-cart-plus" aria-hidden="true"></i>Sản
              phẩm mua sau</li>
          </ul>
        </div>
        <div class="col-md-10">
          <div class="card" style="min-height: 450px">
            <div class="card-body">
              <div *ngIf="active[0]">
                <div class="col-md-12 status-update" *ngIf="statusUpdate != null" [ngClass]="{'active-status' : isSuccess}">
                  <p><i *ngIf="isSuccess" class="fa fa-check" aria-hidden="true"></i><i *ngIf="!isSuccess" class="fa fa-times"
                      aria-hidden="true"></i>{{ statusUpdate }}</p>
                </div>
                <p class="title">Thông tin tài khoản</p>
                <form [formGroup]="formInfo">
                  <div class="form-group">
                    <label>Họ tên</label>
                    <input type="text" formControlName="fullname" />
                    <p class="label-error" *ngIf="formInfo.controls.fullname?.hasError('required')
                                     && formInfo.controls.fullname?.touched">
                      Vui lòng nhập dữ liệu.
                    </p>
                  </div>
                  <div class="form-group">
                    <label>Email</label>
                    <input type="text" readonly formControlName="username" />
                  </div>
                  <div class="form-group">
                    <label>Giới tính</label>
                    <label class="radio-inline"><input type="radio" formControlName="sex" [checked]="isMale" value="1">Nam</label>
                    <label class="radio-inline"><input type="radio" formControlName="sex" [checked]="!isMale" value="0">Nữ</label>
                  </div>
                  <div class="form-group">
                    <label>Ngày sinh</label>
                    <select formControlName="day">
                      <option>Ngày</option>
                      <option value="01">01</option>
                      <option value="02">02</option>
                      <option value="03">03</option>
                      <option value="04">04</option>
                      <option value="05">05</option>
                      <option value="06">06</option>
                      <option value="07">07</option>
                      <option value="08">08</option>
                      <option value="09">09</option>
                      <option value="10">10</option>
                      <option value="11">11</option>
                      <option value="12">12</option>
                      <option value="13">13</option>
                      <option value="14">14</option>
                      <option value="15">15</option>
                      <option value="16">16</option>
                      <option value="17">17</option>
                      <option value="18">18</option>
                      <option value="19">19</option>
                      <option value="20">20</option>
                      <option value="21">21</option>
                      <option value="22">22</option>
                      <option value="23">23</option>
                      <option value="24">24</option>
                      <option value="25">25</option>
                      <option value="26">26</option>
                      <option value="27">27</option>
                      <option value="28">28</option>
                      <option value="29">29</option>
                      <option value="30">30</option>
                      <option value="31">31</option>
                    </select>
                    <select formControlName="month">
                      <option>Tháng</option>
                      <option value="01">01</option>
                      <option value="02">02</option>
                      <option value="03">03</option>
                      <option value="04">04</option>
                      <option value="05">05</option>
                      <option value="06">06</option>
                      <option value="07">07</option>
                      <option value="08">08</option>
                      <option value="09">09</option>
                      <option value="10">10</option>
                      <option value="11">11</option>
                      <option value="12">12</option>
                    </select>
                    <select formControlName="year">
                      <option>Năm</option>
                      <option value="2015">2015</option>
                      <option value="2014">2014</option>
                      <option value="2013">2013</option>
                      <option value="2012">2012</option>
                      <option value="2011">2011</option>
                      <option value="2010">2010</option>
                      <option value="2009">2009</option>
                      <option value="2008">2008</option>
                      <option value="2007">2007</option>
                      <option value="2006">2006</option>
                      <option value="2005">2005</option>
                      <option value="2004">2004</option>
                      <option value="2003">2003</option>
                      <option value="2002">2002</option>
                      <option value="2001">2001</option>
                      <option value="2000">2000</option>
                      <option value="1999">1999</option>
                      <option value="1998">1998</option>
                      <option value="1997">1997</option>
                      <option value="1996">1996</option>
                      <option value="1995">1995</option>
                      <option value="1994">1994</option>
                      <option value="1993">1993</option>
                      <option value="1992">1992</option>
                      <option value="1991">1991</option>
                      <option value="1990">1990</option>
                    </select>
                  </div>
                  <div class="form-group" style="margin-left: 118px;">
                    <div class="checkbox tiny">
                      <div class="checkbox-overlay">
                        <input type="checkbox">
                        <div class="checkbox-container">
                          <div class="checkbox-checkmark"></div>
                        </div>
                        <label>Đổi mật khẩu</label>
                      </div>
                    </div>
                  </div>
                  <div class="collapse" id="change-password">
                    <div class="form-group" *ngIf="social.local">
                      <label>Mật khẩu cũ</label>
                      <input type="password" formControlName="old_password" />
                    </div>
                    <div class="form-group">
                      <label>Mật khẩu mới</label>
                      <input type="password" formControlName="new_password" />
                    </div>
                    <div class="form-group">
                      <label>Nhập lại mật khẩu</label>
                      <input type="password" formControlName="confirm_password" />
                    </div>
                  </div>
                  <button class="btn primary-btn" [disabled]="formInfo.invalid" (click)="updateProfile()">Cập nhật</button>
                </form>
                <div class="social mt-4">
                  <p class="title">Liên kết mạng xã hội</p>
                  <div class="face">
                    <img src="assets/images/page/icon-facebook.png" />
                    <span>Facebook</span>
                    <i *ngIf="social.face" class="fa fa-check" aria-hidden="true"></i>
                    <span *ngIf="social.face" class="status">Đã liên kết</span>
                  </div>
                  <div class="google">
                    <img src="assets/images/page/icon-google.png" />
                    <span>Google</span>
                    <i *ngIf="social.google" class="fa fa-check" aria-hidden="true"></i>
                    <span *ngIf="social.google" class="status">Đã liên kết</span>
                  </div>
                </div>
              </div>
              <div *ngIf="active[1]">
                <p class="title-custom">Đơn hàng của bạn</p>
                <div class="empty" *ngIf="products.order.length == 0">
                  <img src="assets/images/page/empty.png" />
                  <p>Bạn chưa có đơn hàng nào</p>
                  <button class="btn primary-btn" [routerLink]="['/index']">Tiếp tục mua hàng</button>
                </div>
                <div class="" *ngIf="products.order.length > 0">
                  <div class="list-product">
                    <table class="table table-bordered">
                      <thead>
                        <tr>
                          <th>#</th>
                          <th>Tên sản phẩm</th>
                          <th>Giá</th>
                          <th>Số lượng</th>
                          <th>Tình trạng đơn hàng</th>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container *ngFor="let order of products.order; let i = index">
                          <tr>
                            <td colspan="5">
                              <span>Mã đơn hàng: {{ order.order_id }}</span>
                              <span class="pull-right"><a [routerLink]="['/order-detail/' + order.order_id]">Xem chi tiết</a></span>
                            </td>
                          </tr>
                          <ng-container *ngFor="let product of order.product; let i = index">
                            <tr>
                              <td><img [src]="'http://103.232.120.91:1337/' + product.image" width="74px" height="57px" /></td>
                              <td class="product-name"><a [routerLink]="['/product/' + product.category_id + product.url_product]"
                                  target="_blank">{{ product.product_name }}</a></td>
                              <td>{{ product.price_sale | number }} ₫</td>
                              <td>{{ product.amount }}</td>
                              <td>Chờ xác nhận</td>
                            </tr>
                          </ng-container>
                        </ng-container>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <div *ngIf="active[2]">
                <p class="title-custom">Sản phẩm bạn đã xem</p>
                <div class="empty" *ngIf="products.viewed.length == 0 && isFinish">
                  <img src="assets/images/page/empty.png" />
                  <p>Không tìm thấy sản phẩm bạn đã xem</p>
                  <button class="btn primary-btn" [routerLink]="['/index']">Tiếp tục mua hàng</button>
                </div>
                <div class="" *ngIf="products.viewed.length > 0">
                  <div class="list-product">
                    <ng-container *ngFor="let product of products.viewed; let i = index">
                      <div (click)="productHandle('new', i);" class="product-items card" data-wow-duration="0.5s"
                        data-wow-delay="0.4s" *ngIf="true">
                        <div class="product product-single">
                          <div class="product-thumb">
                            <img [src]="'http://103.232.120.91:1337' + product.image" alt="">
                          </div>
                          <div class="product-body">
                            <div class="field-brand">
                              <p class="product-brand">{{ product.manufacturer }}</p>
                              <span class="discount-label">-{{ 100-(product.price_sale / product.price * 100) |
                                number:'1.0-0'}}%</span>
                            </div>
                            <p class="product-name">{{ product.product_name }}</p>
                            <div class="field-price">
                              <span class="price_old">{{ product.price | number }} đ</span>
                              <span class="price_sale">{{ product.price_sale | number }} đ</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </ng-container>
                  </div>
                  <div class="col-md-12 mt-3 text-center">
                    <button class="btn primary-btn" [routerLink]="['/product']" [queryParams]="{src: 'product-viewed'}">Xem
                      thêm</button>
                  </div>
                </div>
                <div class="col-md-12 text-center loading" *ngIf="!isFinish">
                  <div class="lds-facebook">
                    <div></div>
                    <div></div>
                    <div></div>
                  </div>
                </div>
              </div>              
              <div *ngIf="active[3]">
                <p class="title-custom">Sản phẩm yêu thích</p>
                <div class="empty">
                  <img src="assets/images/page/empty.png" />
                  <p>Hãy cho chúng tôi biết bạn yêu thích sản phẩm nào để chúng tôi phục vụ bạn tốt hơn</p>
                  <button class="btn primary-btn" [routerLink]="['/index']">Tiếp tục mua hàng</button>
                </div>
              </div>
              <div *ngIf="active[4]">
                <p class="title-custom">Sản phẩm mua sau</p>
                <div class="empty">
                  <img src="assets/images/page/empty.png" />
                  <p>Không tìm thấy sản phẩm bạn dự định mua</p>
                  <button class="btn primary-btn" [routerLink]="['/index']">Tiếp tục mua hàng</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card mt-3" *ngIf="formInfo == null">
        <div class="card-body">
          <h5>Bạn chưa đăng nhập</h5>
        </div>
      </div>
    </div>
  </div>
</div>
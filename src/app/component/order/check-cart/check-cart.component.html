<div class="custom-loading" *ngIf="isLoading">
  <div class="lds-facebook">
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>

<div id="cart-page" *ngIf="cart != null">
  <div class="container">
    <div class="home-wrap">
      <div class="row">
        <div class="col-md-12 mt-3">
          <div class="card">
            <div class="card-body">
              <div class="line-step"></div>
              <ul class="step-process step-process-horizontal">
                <li class="step-one step-num">
                  <span class="number active">1</span>
                  <span class="text">Giỏ hàng</span>
                </li>
                <li class="step-two step-num">
                  <span class="number">2</span>
                  <span class="text">Địa chỉ giao hàng</span>
                </li>
                <li class="step-three step-num">
                  <span class="number">3</span>
                  <span class="text">Thanh toán</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-md-12 mt-4 mb-2">
          <h2 class="my-cart">Giỏ hàng của bạn</h2>
          <div class="product-total">({{ cart.length }} sản phẩm)</div>
        </div>
        <div class="col-md-8">
          <div class="card">
            <div class="card-body">
              <div class="data-cart">
                <ng-container *ngFor="let product of (cart ? cart : [])">
                  <div class="row col-md-12">
                    <div class="col-md-1 checkbox tiny">
                      <div class="checkbox-overlay">
                        <input type="checkbox" checked="checked">
                        <div class="checkbox-container">
                          <div class="checkbox-checkmark"></div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-2">
                      <img height="74" width="57" class="vertical" [src]="'http://103.232.120.91:1337' + product.image" alt="Áo Cổ V Khánh Linh MS0105A Trắng">
                    </div>
                    <div class="col-md-4 product-col vertical">
                      <span>{{ product.marketplace }}</span>
                      <p style="margin-bottom:0px!important"><strong>{{ product.product_name }}</strong></p>
                      <p style="color: #919191">Xóa</p>
                    </div>
                    <div class="col-md-2 price-col vertical">
                      <span class="current-price price_sale" style="font-weight: 700">{{ product.price_sale | number }}
                        ₫</span>
                      <p class="old-price price_old" style="color:#a9a9a9"><del>{{ product.price | number }} ₫</del></p>
                    </div>
                    <div class="col-md-2 field-qty-col">
                      <button class="btn-minute" (click)="subNum(product.id);" type="button"><span>-</span></button>
                      <input maxlength="2" name="numProduct" type="text" [(ngModel)]="product.num" />
                      <button class="btn-plus" (click)="plusNum(product.id)" type="button"><span>+</span></button>
                    </div>
                  </div>
                  <hr />
                </ng-container>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card info-order">
            <div class="card-body">
              <h5 class="title-custom">Thông tin đơn hàng</h5>
              <div class="row">
                <div class="col-md-12">
                  <span class="lb-text">Tổng cộng</span>
                  <span class="lb-number price totalPrice">{{ totalPrice | number }} ₫</span>
                </div>
                <div class="col-md-12">
                  <span class="lb-text">Phí giao hàng (tạm tính)</span>
                  <span class="lb-number">{{ transferCost == 0 ? "Miễn phí" : transferCost }}</span>
                </div>
                <div class="col-md-12" style="font-size:16px">
                  <hr>
                  <span class="lb-text">Thanh toán</span>
                  <span class="lb-number totalPay" style="color:red">{{ totalPrice + transferCost | number }} ₫</span>
                  <button type="button" [routerLink]="['/check-shipping']" class="btn primary-btn btn-lg btn-block btn-continue"
                    style="margin-top: 20px; margin-bottom: 20px;">Tiếp tục</button>
                </div>
                <div class="col-md-12" style="text-align: center">
                  {{ transferMessage }}
                  <p><a href="#">Cập nhật</a></p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="product-not-found" *ngIf="!isLoading && cart == null">
  <div class="card" >
    <div class="card-body">
      <h5>Không tìm thấy sản phẩm trong giỏ hàng</h5>
    </div>
  </div>
</div>